<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Chat - House of Suntory</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
  <!-- Adobe Fonts - Futura PT -->
  <link rel="stylesheet" href="https://use.typekit.net/rfm8mfq.css">
  
  <!-- CSS Files -->
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./css/chat.css">
  
  <style>
    /* Animation delays for messages */
    .message:nth-child(1) { animation-delay: 0.1s; }
    .message:nth-child(2) { animation-delay: 0.3s; }
    .message:nth-child(3) { animation-delay: 0.5s; }
    .message:nth-child(4) { animation-delay: 0.7s; }
    .message:nth-child(5) { animation-delay: 0.9s; }
    .message:nth-child(6) { animation-delay: 1.1s; }
    .cocktail-cards { animation-delay: 0.8s; }
    .experience-cta { animation-delay: 1.2s; }
    
    /* Make screen always visible on standalone page */
    .screen {
      opacity: 1 !important;
      visibility: visible !important;
    }
  </style>
</head>
<body>
  <div class="app" role="main">
    <!-- CHAT SCREEN -->
    <section class="screen chat-screen active" id="chatScreen" aria-label="Chat with AI Bartender">
      <!-- Video Intro Overlay -->
      <div class="chat-video-intro" id="chatVideoIntro">
        <video 
          id="chatIntroVideo" 
          class="chat-intro-video" 
          autoplay 
          muted 
          playsinline
          preload="auto"
        >
          <source src="./images/bar-background.mp4" type="video/mp4">
        </video>
      </div>
      
      <header class="chat-header">
        <img src="./images/assets/logo-chat.png" alt="The House of Suntory" class="header-logo-img" />
        <button class="header-mute" aria-label="Toggle audio" tabindex="0">
          <img src="./images/assets/no-sound-white.png" alt="" class="mute-icon" />
        </button>
        <button class="header-profile" aria-label="User profile" tabindex="0">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
            <circle cx="12" cy="8" r="4"/>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
          </svg>
        </button>
      </header>
      
      <div class="chat-body">
        <div class="bartender-bg" aria-hidden="true">
          <div class="bartender-container" id="bartenderContainer">
            <img 
              src="./images/assets/AI-bartender1.png" 
              alt="" 
              class="bartender-image bartender-image--1 active" 
              aria-hidden="true"
            >
            <img 
              src="./images/assets/AI-bartender2.png" 
              alt="" 
              class="bartender-image bartender-image--2" 
              aria-hidden="true"
            >
            <img 
              src="./images/assets/AI-bartender3.png" 
              alt="" 
              class="bartender-image bartender-image--3" 
              aria-hidden="true"
            >
          </div>
        </div>
        
        <!-- Drink Counter on Bar -->
        <div class="drink-counter" id="drinkCounter">
          <div class="drink-counter-title">SELECT A COCKTAIL</div>
          <div class="drink-bottles-container">
            <div class="drink-bottles-carousel" id="drinkBottlesCarousel">
              <!-- Drink 1 - Toki Sour -->
              <button class="drink-bottle drink-bottle--toki-sour" data-drink="toki-sour" data-index="0" aria-label="Select Toki Sour" tabindex="0">
                <img src="./images/drinksCounter/1-toki-sour.png" alt="Toki Sour" />
              </button>
              <!-- Drink 2 - Haku Yuza -->
              <button class="drink-bottle drink-bottle--haku-yuza" data-drink="haku-yuza" data-index="1" aria-label="Select Haku Yuza" tabindex="0">
                <img src="./images/drinksCounter/2-haku-yuza.png" alt="Haku Yuza" />
              </button>
              <!-- Drink 3 - Toki Black -->
              <button class="drink-bottle drink-bottle--toki-black" data-drink="toki-black" data-index="2" aria-label="Select Toki Black" tabindex="0">
                <img src="./images/drinksCounter/3-toki-black.png" alt="Toki Black" />
              </button>
              <!-- Drink 4 - Roku Gin -->
              <button class="drink-bottle drink-bottle--roku-gin" data-drink="roku-gin" data-index="3" aria-label="Select Roku Gin" tabindex="0">
                <img src="./images/drinksCounter/4-roku-gin.png" alt="Roku Gin" />
              </button>
              <!-- Drink 5 - Toki Highball (center) -->
              <button class="drink-bottle drink-bottle--toki-selected selected" data-drink="toki" data-index="4" aria-label="Select Toki Highball" tabindex="0">
                <img src="./images/drinksCounter/5-toki-selected.png" alt="Toki Highball" />
              </button>
              <!-- Drink 6 - Haku Espresso -->
              <button class="drink-bottle drink-bottle--haku-espresso" data-drink="haku-espresso" data-index="5" aria-label="Select Haku Espresso" tabindex="0">
                <img src="./images/drinksCounter/6-haku-espresso.png" alt="Haku Espresso" />
              </button>
              <!-- Drink 7 - Roku Gin -->
              <button class="drink-bottle drink-bottle--roku-gin-2" data-drink="roku-gin-2" data-index="6" aria-label="Select Roku Gin" tabindex="0">
                <img src="./images/drinksCounter/7-roku-gin.png" alt="Roku Gin" />
              </button>
              <!-- Drink 8 - Roku Negroni -->
              <button class="drink-bottle drink-bottle--roku-negroni" data-drink="roku-negroni" data-index="7" aria-label="Select Roku Negroni" tabindex="0">
                <img src="./images/drinksCounter/8-roku-negroni.png" alt="Roku Negroni" />
              </button>
            </div>
          </div>
          <div class="drink-info">
            <div class="drink-name" id="drinkName">Toki Highball</div>
            <div class="drink-description" id="drinkDescription">A whisky blended for crafting highballs. The House of Suntory crafted Toki using a bolder grain whisky from the Chita Distillery, with more flavor than is typical in blended whiskies.</div>
          </div>
        </div>
        
        <div class="chat-messages" id="chatMessages" role="log" aria-live="polite">
          <!-- Messages will be added dynamically -->
        </div>
      </div>
      
      <div class="chat-input-container">
        <div class="chat-input-wrapper">
          <input 
            type="text" 
            class="chat-input" 
            id="chatInput"
            placeholder="Type your message..." 
            aria-label="Message input"
            autocomplete="off"
          >
          <button class="input-btn" aria-label="Voice input" tabindex="0">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="2" width="6" height="12" rx="3"/>
              <path d="M5 10v2a7 7 0 0 0 14 0v-2"/>
              <line x1="12" y1="22" x2="12" y2="19"/>
            </svg>
          </button>
          <button class="input-btn input-btn--send" id="sendBtn" aria-label="Send message" tabindex="0">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"/>
              <polyline points="12 5 19 12 12 19"/>
            </svg>
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Ice Carving Panel -->
  <div id="hotspotOverlay" class="hotspot-overlay" role="presentation"></div>
  <div id="panelIce" class="hotspot-panel" role="dialog" aria-labelledby="panelIceTitle" aria-modal="true">
    <div class="hotspot-panel-header">
      <button class="hotspot-panel-close" aria-label="Close panel" tabindex="0">Ã—</button>
    </div>
    <img src="./images/assets/icecarving.jpg" alt="Ice Carving" width="100%" height="auto" />
    <div class="bento-bottom">
      <div class="bento-bottom-left icg-left">
        <h3>
          ICE<br>
          CARVING<br>
          GAME
        </h3>
      </div>
      <div class="bento-bottom-right icg-right">
        <p>Try the Japanese art of ice carving for an effervescent Toki Highball.</p>
      </div>
    </div>
  </div>

  <!-- Config (must load before modules) -->
  <script src="./config.js"></script>
  
  <script type="module">
    import { initChatScreen } from './js/chat.js';
    
    // Initialize chat screen on page load
    // Wait for DOM to be fully ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        initChatScreen().catch(err => {
          console.error('Error initializing chat screen:', err);
        });
      });
    } else {
      initChatScreen().catch(err => {
        console.error('Error initializing chat screen:', err);
      });
    }
  </script>
</body>
</html>

